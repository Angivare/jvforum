<!--    github.com/dieulot/jvforum    -->
<!doctype html>
<meta charset="utf-8">
<title>JVForum</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link class="js-favicon" rel="icon" href="/images/favicon.png">
<meta name="theme-color" content="hsl(240, 8%, 13%)">
<style>
body {
  font: 15px/1.4 sans-serif;
  background: #e7e9ec;
}
</style>


<h2>Connexion à JVForum bêta</h2>

<p>Connectez-vous ci-dessous pour essayer la bêta, et veuillez rapporter tous les bugs que vous croisez sur le topic officiel.</p>

<form id="js-form" action="/" method="post">
  <input id="nickname" type="text" name="login_pseudo" placeholder="Pseudo" maxlength="15" autocorrect="off">
  <br>
  <input id="password" type="password" placeholder="Mot de passe">
  <div class="g-recaptcha" data-sitekey="6Lelbg8TAAAAAMwha8p0BZK5LdpgzISjsD_bSuyx"></div>
  <input id="submit" type="submit" value="Me connecter" style="font-weight: bold">
</form>

<p><small>Votre identifiant sera transmis au serveur de JVForum, sans y être stocké. JVForum n’est pas affilié à <a href="http://www.jeuxvideo.com/">jeuxvideo.com</a></small></p>

<script>
function geid(id) {
  return document.getElementById(id);
}

geid('js-form').addEventListener('submit', function (e) {
  e.preventDefault();
  geid('submit').disabled = true;
  var xhr = new XMLHttpRequest();
  xhr.addEventListener('readystatechange', function() {
    if (xhr.readyState < 4) {
      return;
    }
    var data = JSON.parse(xhr.responseText);
    if (data.successful) {
      location.href = '/1000021/39674315-appli-jvforum-topic-officiel';
    }
    else {
      alert(data.error);
      location.href = location.href;
    }
  });
  xhr.open('POST', '/ajax/login');
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  xhr.send('nickname=' + geid('nickname').value + '&password=' + geid('password').value + '&captcha=' + geid('g-recaptcha-response').value);
});

var googleAnalyticsId = '{{=it.googleAnalyticsId}}';
if (googleAnalyticsId) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', googleAnalyticsId, 'auto');
  ga('set', 'dimension1', 'Guest');
  ga('send', 'pageview');
}
</script>
<script src="/assets/scripts/fastclick--{{=it.cacheBusting.scripts.fastclick}}.js" data-no-instant></script>
<script>FastClick.attach(document.body)</script>
<script src="https://www.google.com/recaptcha/api.js?hl=fr"></script>
